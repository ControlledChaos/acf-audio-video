{"version":3,"sources":["webpack:///webpack/bootstrap 9106de63359502bd3355","webpack:///./scripts/src/field/index.js","webpack:///./scripts/src/field/SelectFrame.js"],"names":["$","jQuery","acf","fields","audioVideo","field","extend","type","$el","actions","events","focus","$field","find","$inputContainer","$playerContainer","o","get_data","allowedTypes","allowed_types","split","map","t","trim","selectFrameType","general_type","inputName","__getInputName","children","attr","length","indexOf","join","splice","initialize","__getTag","attributes","console","log","this","__guessTag","i","audio_types","render","tag","nextAttributes","prevAttributes","sources","__getSources","empty","removeClass","$mediaElement","addClass","html","__getPlayerMarkup","MediaElementPlayer","Object","keys","forEach","__insertHiddenInput","name","__triggerChange","reduce","ext","concat","__getMime","src","atts","__getTagAtts","height","defaults","playerDefaults","hasOwnProperty","attName","value","data","key","appendTo","_","isEqual","trigger","add","$repeater","get_closest_field","multiple","exists","selectFrame","title","_e","mode","library","mime_types","select","attachment","idx","$row","closest","nextAll","each","el","get_field","repeater","doFocus","url","toLowerCase","pop","image","test","poster","args","set","open","edit","__getAttributesFromInputs","shortcode","__getShortcode","editFrame","wp","media","on","__getNextAttributes","detach","toArray","getAttribute","replace","frameAttributes","remove","prop","bind","SelectFrame","settings","createFrame","_get_media_frame_settings","states","_getLibraryTypes","Query","query","isset","mirroring","_acfuploader","controller","Library","priority","filterable","editable","allowLocalEdits","push","EditImage","frame","uploader","options","params","allowed_extensions","addEvents","_add_media_frame_events","toolbar","content","get","filters","all","text","uploaded","audio","video","k","filter","props","setTimeout","generalType","String","libraryTypes","Array","postId","isNumeric","button","post_id","id","frames"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACtCA;;;;;;;;AAEA,KAAMA,IAAIC,MAAV;;AAEAC,KAAIC,MAAJ,CAAWC,UAAX,GAAwBF,IAAIG,KAAJ,CAAUC,MAAV,CAAiB;AACvCC,SAAM,YADiC;AAEvCC,QAAK,IAFkC;AAGvCC,YAAS;AACP,cAAS,YADF;AAEP,eAAU;AAFH,IAH8B;AAOvCC,WAAQ;AACN,iCAA4B,KADtB;AAEN,kCAA6B,MAFvB;AAGN,oCAA+B;AAHzB,IAP+B;AAYvCC,UAAO,iBAAY;AACjB,UAAKH,GAAL,GAAW,KAAKI,MAAL,CAAYC,IAAZ,CAAiB,2BAAjB,CAAX;AACA,UAAKC,eAAL,GAAuB,KAAKN,GAAL,CAASK,IAAT,CAAc,aAAd,CAAvB;AACA,UAAKE,gBAAL,GAAwB,KAAKP,GAAL,CAASK,IAAT,CAAc,mBAAd,CAAxB;AACA,UAAKG,CAAL,GAASd,IAAIe,QAAJ,CAAa,KAAKT,GAAlB,CAAT;AACA,UAAKU,YAAL,GAAoB,KAAKF,CAAL,CAAOG,aAAP,CAAqBC,KAArB,CAA2B,GAA3B,EAAgCC,GAAhC,CAAoC;AAAA,cAAKC,EAAEC,IAAF,EAAL;AAAA,MAApC,CAApB;AACA,UAAKC,eAAL,GAAuB,CAAC,KAAKR,CAAL,CAAOS,YAAR,IAAwB,KAAKT,CAAL,CAAOS,YAAP,IAAuB,MAA/C,GACnB,CAAC,OAAD,EAAU,OAAV,CADmB,GAEnB,KAAKT,CAAL,CAAOS,YAFX;AAGA,UAAKC,SAAL,GAAiB,KAAKC,cAAL,EAAjB;AACD,IAtBsC;AAuBvCA,mBAAgB,0BAAY;AAC1B,SAAMD,YAAY,KAAKZ,eAAL,CACfc,QADe,CACN,QADM,EAEfC,IAFe,CAEV,MAFU,EAGfT,KAHe,CAGT,IAHS,CAAlB;;AAKA,SAAIM,UAAUA,UAAUI,MAAV,GAAmB,CAA7B,EAAgCC,OAAhC,CAAwC,OAAxC,KAAoD,CAAxD,EACE,OAAOL,UAAUM,IAAV,CAAe,IAAf,CAAP;;AAEFN,eAAUO,MAAV,CAAiBP,UAAUI,MAAV,GAAmB,CAApC,EAAuC,CAAvC;;AAEA,YAAOJ,UAAUM,IAAV,CAAe,IAAf,IAAqB,GAA5B;AACD,IAnCsC;AAoCvCE,eAAY,sBAAY;AACtB;AACD,IAtCsC;AAuCvCC,aAAU,kBAAUC,UAAV,EAAsB;AAC9B,SAAI,OAAOA,UAAP,KAAsB,WAA1B,EACEC,QAAQC,GAAR,CAAY,EAAEC,UAAF,EAAZ;;AAEF,YAAO,KAAKvB,CAAL,CAAOS,YAAP,IAAuB,KAAKT,CAAL,CAAOS,YAAP,KAAwB,MAA/C,GACH,KAAKT,CAAL,CAAOS,YADJ,GAEH,KAAKe,UAAL,CAAgBJ,UAAhB,CAFJ;AAGD,IA9CsC;AA+CvCI,eAAY,oBAAUJ,UAAV,EAAsB;AAChC,UAAK,IAAIK,IAAI,CAAb,EAAgBA,IAAI,KAAKvB,YAAL,CAAkBY,MAAtC,EAA8CW,GAA9C;AACE,WAAIL,WAAW,KAAKlB,YAAL,CAAkBuB,CAAlB,CAAX,CAAJ,EAAsC;AACpC,gBAAO,KAAKzB,CAAL,CAAO0B,WAAP,CAAmBX,OAAnB,CAA2B,KAAKb,YAAL,CAAkBuB,CAAlB,CAA3B,IAAmD,CAAC,CAApD,GACH,OADG,GAEH,OAFJ;AAGD;AALH,MAOA,OAAO,OAAP;AACD,IAxDsC;AAyDvCE,WAAQ,sBAAmD;AAAA;;AAAA,SAAvCC,GAAuC,QAAvCA,GAAuC;AAAA,SAAlCC,cAAkC,QAAlCA,cAAkC;AAAA,SAAlBC,cAAkB,QAAlBA,cAAkB;;AACzD,SAAMC,UAAUH,MACZ,KAAKI,YAAL,CAAkBJ,GAAlB,EAAuBC,cAAvB,CADY,GAEZ,EAFJ;;AAIA,UAAK9B,gBAAL,CAAsBkC,KAAtB,GAA8BC,WAA9B,CAA0C,aAA1C;AACA,UAAKpC,eAAL,CAAqBmC,KAArB;;AAEA,SAAIF,QAAQjB,MAAZ,EAAoB;AAClB,WAAMqB,gBAAgB,KAAKpC,gBAAL,CACnBqC,QADmB,CACVR,GADU,EAEnBS,IAFmB,CAEd,KAAKC,iBAAL,CAAuBV,GAAvB,EAA4BC,cAA5B,EAA4CE,OAA5C,CAFc,EAGnBlC,IAHmB,CAGd+B,GAHc,CAAtB;;AAKA,WAAIW,kBAAJ,CAAuBJ,aAAvB;;AAEAK,cAAOC,IAAP,CAAYZ,cAAZ,EAA4Ba,OAA5B,CAAoC;AAAA,gBAClC,MAAKC,mBAAL,CAAyBC,IAAzB,EAA+Bf,eAAee,IAAf,CAA/B,CADkC;AAAA,QAApC;AAGA,YAAKpD,GAAL,CAAS4C,QAAT,CAAkB,WAAlB;AACD,MAZD,MAYO;AACL,YAAKO,mBAAL;AACA,YAAKnD,GAAL,CAAS0C,WAAT,CAAqB,WAArB;AACD;;AAED,UAAKW,eAAL,CAAqBf,cAArB,EAAqCD,cAArC;AACD,IAnFsC;AAoFvCG,iBAAc,sBAAUJ,GAAV,EAAeR,UAAf,EAA2B;AAAA;;AACvC,YAAO,KAAKlB,YAAL,CAAkB4C,MAAlB,CACL,UAACf,OAAD,EAAUgB,GAAV;AAAA,cACE3B,WAAW2B,GAAX,IACIhB,QAAQiB,MAAR,CAAe;AACbzD,eAAM,OAAK0D,SAAL,CAAerB,GAAf,EAAoBmB,GAApB,CADO;AAEbG,cAAK9B,WAAW2B,GAAX;AAFQ,QAAf,CADJ,GAKIhB,OANN;AAAA,MADK,EAQL,EARK,CAAP;AAUD,IA/FsC;AAgGvCkB,cAAW,mBAAUrB,GAAV,EAAemB,GAAf,EAAoB;AAC7B,aAAOA,GAAP;AACE,YAAK,KAAL;AACE,gBAAO,YAAP;AACF,YAAK,KAAL;AACE,gBAAO,WAAP;AACF,YAAK,KAAL;AACA,YAAK,KAAL;AACE,gBAAO,WAAP;AACF,YAAK,MAAL;AACE,gBAAO,YAAP;AACF,YAAK,KAAL;AACE,gBAAO,WAAP;AACF,YAAK,KAAL;AACE,gBAAUnB,GAAV;AACF,YAAK,KAAL;AACE,gBAAO,WAAP;AACF;AACE,gBAAUA,GAAV,SAAiBmB,GAAjB;AAjBJ;AAmBD,IApHsC;AAqHvCT,sBAAmB,2BAAUV,GAAV,EAAeR,UAAf,EAA2BW,OAA3B,EAAoC;AACrD,SAAMoB,OAAO,KAAKC,YAAL,CAAkBxB,GAAlB,EAAuBR,UAAvB,CAAb;AACA,SAAMiC,SAASzB,OAAO,OAAP,GACX,cADW,GAEX,EAFJ;;AAIA,gCAAyBA,GAAzB,oEACqDA,GADrD,0CAEKA,GAFL,mBAEsBA,GAFtB,gCAEoDyB,MAFpD,SAE8DF,IAF9D,4BAGMpB,QAAQ1B,GAAR,CAAY;AAAA,WAAGd,IAAH,SAAGA,IAAH;AAAA,WAAS2D,GAAT,SAASA,GAAT;AAAA,iCACK3D,IADL,eACmB2D,GADnB;AAAA,MAAZ,CAHN,kBAMMtB,GANN;AAQD,IAnIsC;AAoIvCwB,iBAAc,sBAAUxB,GAAV,EAAeR,UAAf,EAA2B;AACvC,SAAMkC,WAAW,KAAKtD,CAAL,CAAOuD,cAAP,CAAsB3B,GAAtB,CAAjB;;AAEA,YAAOY,OACJC,IADI,CACCa,QADD,EACWN,MADX,CACkB,QADlB,EAEJF,MAFI,CAGH,UAACK,IAAD,EAAOP,IAAP;AAAA,cACExB,WAAWoC,cAAX,CAA0BZ,IAA1B,IACOO,IADP,SACeP,IADf,UACwBxB,WAAWwB,IAAX,CADxB,SAEIO,IAHN;AAAA,MAHG,EAOH,EAPG,CAAP;AASD,IAhJsC;AAiJvCR,wBAAqB,6BAAUc,OAAV,EAAmBC,KAAnB,EAA0B;AAAA,wBAC7B,KAAK9D,MAAL,CAAY+D,IAAZ,EAD6B;;AAAA,SACrCC,GADqC,gBACrCA,GADqC;;AAE7C,SAAMhB,OAAO,CAACa,OAAD,GACT,KAAK/C,SADI,GAEN,KAAKA,SAFC,SAEY+C,OAFZ,MAAb;;AAIAzE,OAAE,uBAAF,EACG6B,IADH,CACQ,EAAE+B,UAAF,EAAQc,YAAR,EADR,EAEGG,QAFH,CAEY,KAAK/D,eAFjB;AAGD,IA1JsC;AA2JvC+C,oBAAiB,yBAAUf,cAAV,EAA0BD,cAA1B,EAA0C;AACzD;AACA,SAAI,CAACC,cAAD,IAAmB,CAACgC,EAAEC,OAAF,CAAUjC,cAAV,EAA0BD,cAA1B,CAAxB,EACE,KAAK/B,eAAL,CAAqBc,QAArB,CAA8B,QAA9B,EAAwCoD,OAAxC,CAAgD,QAAhD;AACH,IA/JsC;AAgKvCC,QAAK,eAAY;AAAA;;AACf,SAAIrE,SAAS,KAAKA,MAAlB;AACA,SAAMsE,YAAYhF,IAAIiF,iBAAJ,CAAsBvE,MAAtB,EAA8B,UAA9B,CAAlB;AACA,SAAMwE,WAAWF,UAAUG,MAAV,EAAjB;AACA,UAAKC,WAAL,GAAmB,0BAAgB;AACjCC,cAAOrF,IAAIsF,EAAJ,CAAO,YAAP,EAAqB,QAArB,CAD0B;AAEjCC,aAAM,QAF2B;AAGjClF,aAAM,KAAKiB,eAHsB;AAIjCnB,cAAOO,OAAO+D,IAAP,CAAY,KAAZ,CAJ0B;AAKjCS,yBALiC;AAMjCM,gBAAS,KAAK1E,CAAL,CAAO0E,OANiB;AAOjCC,mBAAY,KAAK3E,CAAL,CAAOG,aAPc;AAQjCyE,eAAQ,gBAACC,UAAD,EAAaC,GAAb,EAAqB;AAC3B;;;;AAIA,aAAIC,OAAOX,YAAYxE,OAAOoF,OAAP,CAAe,UAAf,CAAvB;;AAEA,aAAIF,MAAM,CAAV,EAAa;AAAA;AACX,iBAAMlB,MAAMhE,OAAO+D,IAAP,CAAY,KAAZ,CAAZ;;AAEA/D,sBAAS,KAAT;;AAEA;AACAmF,kBAAKE,OAAL,CAAa,kBAAb,EAAiCC,IAAjC,CAAsC,UAACJ,GAAD,EAAMK,EAAN,EAAa;AACjDvF,wBAASV,IAAIkG,SAAJ,CAAcxB,GAAd,EAAmB5E,EAAEmG,EAAF,CAAnB,CAAT;;AAEA,mBAAI,CAACvF,MAAL,EACE;;AAEF;AACA,mBAAIA,OAAOC,IAAP,CAAY,8BAAZ,EAA4CwE,MAA5C,EAAJ,EAA0D;AACxDzE,0BAAS,KAAT;AACA;AACD;;AAED;AACA,sBAAO,KAAP;AACD,cAdD;;AAgBA;AACA,iBAAI,CAACA,MAAL,EAAa;AACXmF,sBAAO7F,IAAIC,MAAJ,CAAWkG,QAAX,CAAoBC,OAApB,CAA4BpB,SAA5B,EAAuCD,GAAvC,EAAP;;AAEA;AACA,mBAAI,CAACc,IAAL,EACE;AAAA,sBAAO;AAAP;;AAEF;AACAnF,wBAASV,IAAIkG,SAAJ,CAAcxB,GAAd,EAAmBmB,IAAnB,CAAT;AACD;AAhCU;;AAAA;AAiCZ;;AAED,aAAMhC,MAAM8B,WAAWzD,UAAX,CAAsBmE,GAAtB,CAA0BC,WAA1B,GAAwCpF,KAAxC,CAA8C,GAA9C,EAAmDqF,GAAnD,EAAZ;AACA,aAAM5D,qCAAoBkB,GAApB,EAA0B8B,WAAWzD,UAAX,CAAsBmE,GAAhD,CAAN;AACA,aAAM3D,MAAM,OAAKT,QAAL,CAAcU,cAAd,CAAZ;;AAEA,aACEgD,WAAWzD,UAAX,CAAsBsE,KAAtB,IACAb,WAAWzD,UAAX,CAAsBsE,KAAtB,CAA4BxC,GAD5B,IAEA,CAAC,iDAAiDyC,IAAjD,CAAsDd,WAAWzD,UAAX,CAAsBsE,KAAtB,CAA4BxC,GAAlF,CAHH,EAKErB,eAAe+D,MAAf,GAAwBf,WAAWzD,UAAX,CAAsBsE,KAAtB,CAA4BxC,GAApD;;AAEF,aAAM2C,OAAO,EAAEjE,QAAF,EAAOC,8BAAP,EAAb;;AAEA,gBAAKiE,GAAL,CAAS,QAAT,EAAmBlG,MAAnB,EAA2B+B,MAA3B,CAAkCkE,IAAlC;AACD;AAhEgC,MAAhB,EAiEhBE,IAjEgB,EAAnB;AAkED,IAtOsC;AAuOvCC,SAAM,gBAAY;AAAA;;AAChB,SAAMlE,iBAAiB,KAAKmE,yBAAL,EAAvB;AACA,SAAMrE,MAAM,KAAKT,QAAL,CAAcW,cAAd,CAAZ;AACA,SAAMoE,YAAY,KAAKC,cAAL,CAAoBvE,GAApB,EAAyBE,cAAzB,CAAlB;;AAEA,SAAIoE,SAAJ,EAAe;AAAA;AACb,aAAME,YAAYC,GAAGC,KAAH,CAAS1E,GAAT,EAAcoE,IAAd,CAAmBE,SAAnB,EAA8BH,IAA9B,EAAlB;;AAEAK,mBAAUG,EAAV,CAAa,OAAb,EAAsB,YAAM;AAC1B,eAAM1E,iBAAiB,OAAK2E,mBAAL,CAAyB5E,GAAzB,EAA8BwE,UAAUE,KAAV,CAAgBlF,UAA9C,CAAvB;AACA,eAAM8C,YAAYhF,IAAIiF,iBAAJ,CAAsB,OAAKvE,MAA3B,EAAmC,UAAnC,CAAlB;AACA,eAAMiG,OAAO,EAAEjE,QAAF,EAAOC,8BAAP,EAAuBC,8BAAvB,EAAb;;AAEA,kBAAKH,MAAL,CAAYkE,IAAZ;AACAO,qBAAUK,MAAV;AACD,UAPD;AAHa;AAWd;AACF,IAxPsC;AAyPvCR,8BAA2B,qCAAY;AACrC,YAAO,KAAKnG,eAAL,CACJc,QADI,GAEJ8F,OAFI,GAGJ5D,MAHI,CAGG,UAAC1B,UAAD,EAAa+D,EAAb,EAAoB;AAC1B,WAAMvC,OAAOuC,GAAGwB,YAAH,CAAgB,MAAhB,EAAwBC,OAAxB,CAAgC,aAAhC,EAA+C,IAA/C,CAAb;AACA,WAAMlD,QAAQyB,GAAGwB,YAAH,CAAgB,OAAhB,CAAd;;AAEA,2BACKvF,UADL,sBAEGwB,IAFH,EAEUc,KAFV;AAID,MAXI,EAWF,EAXE,CAAP;AAYD,IAtQsC;AAuQvCyC,mBAAgB,wBAAUvE,GAAV,EAAeR,UAAf,EAA2B;AACzC,SAAM+B,OAAOX,OACVC,IADU,CACLrB,UADK,EAEV0B,MAFU,CAGT,UAACK,IAAD,EAAOP,IAAP;AAAA,cACKO,IADL,SACaP,IADb,UACsBxB,WAAWwB,IAAX,CADtB;AAAA,MAHS,EAKT,EALS,CAAb;;AAQA,YAAOO,cAAYvB,GAAZ,SAAmBuB,IAAnB,WAA6BvB,GAA7B,MAAP;AACD,IAjRsC;AAkRvC4E,wBAAqB,6BAAU5E,GAAV,EAAeiF,eAAf,EAAgC;AACnD,SAAMvD,WAAW,KAAKtD,CAAL,CAAOuD,cAAP,CAAsB3B,GAAtB,CAAjB;AACA,SAAMC,iBAAiB,EAAvB;;AAEA,SAAIgF,gBAAgBjB,MAApB,EACE/D,eAAe+D,MAAf,GAAwBiB,gBAAgBjB,MAAxC;;AAEFpD,YAAOC,IAAP,CAAYa,QAAZ,EAAsBZ,OAAtB,CAA8B,gBAAQ;AACpC,WAAImE,gBAAgBjE,IAAhB,KAAyBU,SAASV,IAAT,CAA7B,EACEf,eAAee,IAAf,IAAuBiE,gBAAgBjE,IAAhB,CAAvB;AACH,MAHD;;AAKA,UAAK1C,YAAL,CAAkBwC,OAAlB,CAA0B,eAAO;AAC/B,WAAImE,gBAAgB9D,GAAhB,CAAJ,EACElB,eAAekB,GAAf,IAAsB8D,gBAAgB9D,GAAhB,CAAtB;AACH,MAHD;;AAKA,YAAOlB,cAAP;AACD,IApSsC;AAqSvCiF,WAAQ,kBAAY;AAClB,UAAKnF,MAAL,CAAY,EAAZ;AACD;AAvSsC,EAAjB,CAAxB;;AA0SA;AACAa,QAAOC,IAAP,CAAYvD,IAAIC,MAAJ,CAAWC,UAAvB,EAAmCsD,OAAnC,CAA2C,gBAAQ;AACjD,OAAI,MAAMiD,IAAN,CAAWoB,IAAX,CAAJ,EACE7H,IAAIC,MAAJ,CAAWC,UAAX,CAAsB2H,IAAtB,IAA8B7H,IAAIC,MAAJ,CAAWC,UAAX,CAAsB2H,IAAtB,EAA4BC,IAA5B,CAAiC9H,IAAIC,MAAJ,CAAWC,UAA5C,CAA9B;AACH,EAHD,E;;;;;;;;;;;;;;;;AC/SA,KAAMJ,IAAIC,MAAV;;KAEqBgI,W,GACnB,qBAAYC,QAAZ,EAAsB;AAAA;;AAAA;;AAAA,QA8BtBC,WA9BsB,GA8BR,YAAM;AAClB,SAAM/F,aAAalC,IAAIoH,KAAJ,CAAUc,yBAAV,CAAoC;AACrD7C,cAAO,MAAK2C,QAAL,CAAc3C,KADgC;AAErDH,iBAAU,MAAK8C,QAAL,CAAc9C,QAF6B;AAGrDM,gBAAS,EAH4C;AAIrD2C,eAAQ;AAJ6C,MAApC,EAKhB,MAAKH,QALW,CAAnB;;AAOA,SAAI,MAAKA,QAAL,CAAc1D,cAAd,CAA6B,YAA7B,CAAJ,EACEpC,WAAWsD,OAAX,CAAmBnF,IAAnB,GAA0B,MAAK+H,gBAAL,EAA1B;;AAEF,SAAMC,QAAQlB,GAAGC,KAAH,CAASkB,KAAT,CAAepG,WAAWsD,OAA1B,CAAd;;AAEA,SAAIxF,IAAIuI,KAAJ,CAAUF,KAAV,EAAiB,WAAjB,EAA8B,MAA9B,CAAJ,EACEA,MAAMG,SAAN,CAAgB7B,IAAhB,CAAqB8B,YAArB,GAAoC,MAAKT,QAAL,CAAc7H,KAAlD;;AAEF+B,gBAAWiG,MAAX,GAAoB,CAClB,IAAIhB,GAAGC,KAAH,CAASsB,UAAT,CAAoBC,OAAxB,CAAgC;AAC9BnD,gBAAS6C,KADqB;AAE9BnD,iBAAUhD,WAAWgD,QAFS;AAG9BG,cAAOnD,WAAWmD,KAHY;AAI9BuD,iBAAU,EAJoB;AAK9BC,mBAAY,KALkB;AAM9BC,iBAAU,IANoB;AAO9BC,wBAAiB;AAPa,MAAhC,CADkB,CAApB;;AAYA,SAAI/I,IAAIuI,KAAJ,CAAUpB,EAAV,EAAc,OAAd,EAAuB,YAAvB,EAAqC,WAArC,CAAJ,EACEjF,WAAWiG,MAAX,CAAkBa,IAAlB,CAAuB,IAAI7B,GAAGC,KAAH,CAASsB,UAAT,CAAoBO,SAAxB,EAAvB;;AAEF,WAAKC,KAAL,GAAa/B,GAAGC,KAAH,CAASlF,UAAT,CAAb;AACA,WAAKgH,KAAL,CAAWC,QAAX,CAAoBC,OAApB,CAA4BD,QAA5B,CAAqCE,MAArC,CAA4CC,kBAA5C,GAAiE,MAAKtB,QAAL,CAAcvC,UAA/E;AACA,WAAKyD,KAAL,CAAWlJ,GAAX,GAAiB,MAAKgI,QAAtB;AACA,WAAKuB,SAAL;AACA,WAAKL,KAAL,GAAalJ,IAAIoH,KAAJ,CAAUoC,uBAAV,CAAkC,MAAKN,KAAvC,EAA8C,MAAKlB,QAAnD,CAAb;AACD,IAlEqB;;AAAA,QAmEtBuB,SAnEsB,GAmEV,YAAM;AAChB,WAAKL,KAAL,CAAW7B,EAAX,CAAc,yBAAd,EAAyC,YAAM;AAC7C,WAAMoC,UAAU,MAAKP,KAAL,CAAWQ,OAAX,CAAmBC,GAAnB,GAAyBF,OAAzC;AACA,WAAMG,UAAUH,QAAQE,GAAR,CAAY,SAAZ,CAAhB;;AAEAC,eAAQA,OAAR,CAAgBC,GAAhB,CAAoBC,IAApB,GAA2B9J,IAAIsF,EAAJ,CAAO,YAAP,EAAqB,KAArB,CAA3B;;AAEA,cAAOsE,QAAQA,OAAR,CAAgBG,QAAvB;AACA,cAAOH,QAAQA,OAAR,CAAgBI,KAAvB;AACA,cAAOJ,QAAQA,OAAR,CAAgBK,KAAvB;AACA,cAAOL,QAAQA,OAAR,CAAgBpD,KAAvB;;AAEA1G,SAAEkG,IAAF,CAAO4D,QAAQA,OAAf,EAAwB,UAACM,CAAD,EAAIC,MAAJ,EAAe;AACrC,aAAIA,OAAOC,KAAP,CAAa/J,IAAb,KAAsB,IAA1B,EACE8J,OAAOC,KAAP,CAAa/J,IAAb,GAAoB,MAAK2H,QAAL,CAAc3H,IAAlC;AACH,QAHD;AAID,MAfD;AAgBD,IApFqB;;AAAA,QAqFtBwG,IArFsB,GAqFf,YAAM;AACXwD,gBAAW;AAAA,cACT,MAAKnB,KAAL,CAAWrC,IAAX,EADS;AAAA,MAAX;;AAIA;AACD,IA3FqB;;AAAA,QA4FtBuB,gBA5FsB,GA4FH,YAAM;AACvB,SAAMpH,eAAe,MAAKgH,QAAL,CAAcvC,UAAd,CAAyBvE,KAAzB,CAA+B,GAA/B,EAAoCC,GAApC,CAAwC;AAAA,cAAKC,EAAEC,IAAF,EAAL;AAAA,MAAxC,CAArB;AACA,SAAMiJ,cAAc,MAAKtC,QAAL,CAAc3H,IAAd,YAA8BkK,MAA9B,GAChB,MAAKvC,QAAL,CAAc3H,IADE,GAEhB,OAFJ;;AAIA,SAAMmK,eAAexJ,aAAaG,GAAb,CAAiB;AAAA,cACpCnB,IAAIC,MAAJ,CAAWC,UAAX,CAAsB6D,SAAtB,CAAgCuG,WAAhC,EAA6CzG,GAA7C,CADoC;AAAA,MAAjB,CAArB;;AAIA;AACA,SAAI,MAAKmE,QAAL,CAAc3H,IAAd,YAA8BoK,KAA9B,IAAuCzJ,aAAaa,OAAb,CAAqB,KAArB,IAA8B,CAAC,CAA1E,EACE2I,aAAaxB,IAAb,CAAkB,WAAlB;;AAEF,YAAOwB,YAAP;AACD,IA3GqB;;AACpB,OAAIE,SAAS1K,IAAI2J,GAAJ,CAAQ,SAAR,CAAb;;AAEA,OAAI,CAAC7J,EAAE6K,SAAF,CAAYD,MAAZ,CAAL,EACEA,SAAS,CAAT;;AAEF,QAAK1C,QAAL;AACEzC,WAAM,QADR,EACoB;AAClBF,YAAO,EAFT,EAEoB;AAClBuF,aAAQ,EAHV,EAGoB;AAClBvK,WAAM,EAJR,EAIoB;AAClBF,YAAO,EALT,EAKoB;AAClBsF,iBAAY,EANd,EAMoB;AAClBD,cAAS,KAPX,EAOoB;AAClBN,eAAU,KARZ,EAQoB;AAClBS,iBAAY,CATd,EASoB;AAClBkF,cAASH,MAVX,EAUoB;AAClBhF,aAAQ,kBAAY,CAAE;AAXxB,MAYKsC,QAZL;;AAeA,OAAI,KAAKA,QAAL,CAAc8C,EAAlB,EACE,KAAK9C,QAAL,CAAcrC,UAAd,GAA2B,KAAKqC,QAAL,CAAc8C,EAAzC;;AAEF,QAAK7C,WAAL;;AAEAjI,OAAIoH,KAAJ,CAAU2D,MAAV,CAAiB/B,IAAjB,CAAsB,KAAKE,KAA3B;;AAEA,UAAO,IAAP;AACD,E;;mBA9BkBnB,W","file":"acf-audio-video-field.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9106de63359502bd3355\n **/","import SelectFrame from './SelectFrame'\n\nconst $ = jQuery\n\nacf.fields.audioVideo = acf.field.extend({\n  type: 'audioVideo',\n  $el: null,\n  actions: {\n    'ready': 'initialize',\n    'append': 'initialize'\n  },\n  events: {\n    'click a[data-name=\"add\"]': 'add',\n    'click a[data-name=\"edit\"]': 'edit',\n    'click a[data-name=\"remove\"]': 'remove'\n  },\n  focus: function () {\n    this.$el = this.$field.find('.acf-audio-video-uploader')\n    this.$inputContainer = this.$el.find('.acf-hidden')\n    this.$playerContainer = this.$el.find('.player-container')\n    this.o = acf.get_data(this.$el)\n    this.allowedTypes = this.o.allowed_types.split(',').map(t => t.trim())\n    this.selectFrameType = !this.o.general_type || this.o.general_type == 'both'\n      ? ['audio', 'video']\n      : this.o.general_type\n    this.inputName = this.__getInputName()\n  },\n  __getInputName: function () {\n    const inputName = this.$inputContainer\n      .children(':first')\n      .attr('name')\n      .split('][')\n\n    if (inputName[inputName.length - 1].indexOf('field') == 0)\n      return inputName.join('][')\n\n    inputName.splice(inputName.length - 1, 1)\n\n    return inputName.join('][')+']'\n  },\n  initialize: function () {\n    /* noop */\n  },\n  __getTag: function (attributes) {\n    if (typeof attributes === 'undefined')\n      console.log({ this })\n\n    return this.o.general_type && this.o.general_type !== 'both'\n      ? this.o.general_type\n      : this.__guessTag(attributes)\n  },\n  __guessTag: function (attributes) {\n    for (let i = 0; i < this.allowedTypes.length; i++)\n      if (attributes[this.allowedTypes[i]]) {\n        return this.o.audio_types.indexOf(this.allowedTypes[i]) > -1\n          ? 'audio'\n          : 'video'\n      }\n\n    return 'video'\n  },\n  render: function ({ tag, nextAttributes, prevAttributes }) {\n    const sources = tag\n      ? this.__getSources(tag, nextAttributes)\n      : []\n    \n    this.$playerContainer.empty().removeClass('audio video')\n    this.$inputContainer.empty()\n\n    if (sources.length) {\n      const $mediaElement = this.$playerContainer\n        .addClass(tag)\n        .html(this.__getPlayerMarkup(tag, nextAttributes, sources))\n        .find(tag)\n\n      new MediaElementPlayer($mediaElement)\n      \n      Object.keys(nextAttributes).forEach(name =>\n        this.__insertHiddenInput(name, nextAttributes[name])\n      )\n      this.$el.addClass('has-value')\n    } else {\n      this.__insertHiddenInput()\n      this.$el.removeClass('has-value')\n    }\n\n    this.__triggerChange(prevAttributes, nextAttributes);\n  },\n  __getSources: function (tag, attributes) {\n    return this.allowedTypes.reduce(\n      (sources, ext) =>\n        attributes[ext]\n          ? sources.concat({\n              type: this.__getMime(tag, ext),\n              src: attributes[ext]\n            })\n          : sources,\n      []\n    )\n  },\n  __getMime: function (tag, ext) {\n    switch(ext) {\n      case 'mp3':\n        return 'audio/mpeg'\n      case 'wav':\n        return 'audio/wav'\n      case 'mp4':\n      case 'm4v':\n        return 'video/mp4'\n      case 'webm':\n        return 'video/webm'\n      case 'ogv':\n        return 'video/ogg'\n      case 'ogg':\n        return `${tag}/ogg`\n      case 'flv':\n        return 'video/flv'\n      default:\n        return `${tag}/${ext}`\n    }\n  },\n  __getPlayerMarkup: function (tag, attributes, sources) {\n    const atts = this.__getTagAtts(tag, attributes)\n    const height = tag == 'video'\n      ? 'height=\"360\"'\n      : ''\n\n    return `<div class=\"wp-${tag}\">\n      <!--[if lt IE 9]><script>document.createElement('${tag}');</script><![endif]-->\n      <${tag} class=\"wp-${tag}-shortcode\" width=\"640\" ${height} ${atts} controls>\n        ${sources.map(({ type, src }) =>\n          `<source type=\"${type}\" src=\"${src}?_=1\"/>`\n        )}\n      </${tag}>\n    </div>`\n  },\n  __getTagAtts: function (tag, attributes) {\n    const defaults = this.o.playerDefaults[tag]\n\n    return Object\n      .keys(defaults).concat('poster')\n      .reduce(\n        (atts, name) =>\n          attributes.hasOwnProperty(name)\n            ? `${atts} ${name}=\"${attributes[name]}\"`\n            : atts,\n        ''\n      )\n  },\n  __insertHiddenInput: function (attName, value) {\n    const { key } = this.$field.data()\n    const name = !attName\n      ? this.inputName\n      : `${this.inputName}[${attName}]`\n\n    $('<input type=\"hidden\">')\n      .attr({ name, value })\n      .appendTo(this.$inputContainer)\n  },\n  __triggerChange: function (prevAttributes, nextAttributes) {\n    /* register unsaved changes */\n    if (!prevAttributes || !_.isEqual(prevAttributes, nextAttributes))\n      this.$inputContainer.children(':first').trigger('change')\n  },\n  add: function () {\n    let $field = this.$field\n    const $repeater = acf.get_closest_field($field, 'repeater')\n    const multiple = $repeater.exists()\n    this.selectFrame = new SelectFrame({\n      title: acf._e('audioVideo', 'select'),\n      mode: 'select',\n      type: this.selectFrameType,\n      field: $field.data('key'),\n      multiple,\n      library: this.o.library,\n      mime_types: this.o.allowed_types,\n      select: (attachment, idx) => {\n        /* Populate subsequent fields of this kind\n         * if this field is in a repeater field and\n         * user has selected multiple files.\n         */\n        let $row = multiple && $field.closest('.acf-row')\n        \n        if (idx > 0) {\n          const key = $field.data('key')\n          \n          $field = false\n\n          // find next field\n          $row.nextAll('.acf-row:visible').each((idx, el) => {\n            $field = acf.get_field(key, $(el))\n            \n            if (!$field)\n              return\n            \n            // bail early if next file uploader has value\n            if ($field.find('.acf-file-uploader.has-value').exists()) {\n              $field = false\n              return\n            } \n              \n            // end loop if $next is found\n            return false\n          })\n          \n          // add extra row if next is not found\n          if (!$field) {\n            $row = acf.fields.repeater.doFocus($repeater).add()\n            \n            // bail early if no $row (maximum rows hit)\n            if (!$row)\n              return false\n            \n            // get next $field\n            $field = acf.get_field(key, $row)\n          }\n        }\n\n        const ext = attachment.attributes.url.toLowerCase().split('.').pop()\n        const nextAttributes = { [ext]: attachment.attributes.url }\n        const tag = this.__getTag(nextAttributes)\n      \n        if (\n          attachment.attributes.image &&\n          attachment.attributes.image.src &&\n          !/wp-includes\\/images\\/media\\/(audio|video).png$/.test(attachment.attributes.image.src)\n        )\n          nextAttributes.poster = attachment.attributes.image.src\n\n        const args = { tag, nextAttributes }\n\n        this.set('$field', $field).render(args)\n      }\n    }).open()\n  },\n  edit: function () {\n    const prevAttributes = this.__getAttributesFromInputs()\n    const tag = this.__getTag(prevAttributes)\n    const shortcode = this.__getShortcode(tag, prevAttributes)\n\n    if (shortcode) {\n      const editFrame = wp.media[tag].edit(shortcode).open()\n\n      editFrame.on('close', () => {\n        const nextAttributes = this.__getNextAttributes(tag, editFrame.media.attributes)\n        const $repeater = acf.get_closest_field(this.$field, 'repeater')\n        const args = { tag, nextAttributes, prevAttributes }\n        \n        this.render(args)\n        editFrame.detach()\n      })\n    }\n  },\n  __getAttributesFromInputs: function () {\n    return this.$inputContainer\n      .children()\n      .toArray()\n      .reduce((attributes, el) => {\n        const name = el.getAttribute('name').replace(/.*\\[(.*)\\]$/, '$1')\n        const value = el.getAttribute('value')\n\n        return {\n          ...attributes,\n          [name]: value\n        }\n      }, {})\n  },\n  __getShortcode: function (tag, attributes) {\n    const atts = Object\n      .keys(attributes)\n      .reduce(\n        (atts, name) =>\n          `${atts} ${name}=\"${attributes[name]}\"`,\n        ''\n      )\n      \n    return atts && `[${tag} ${atts}][/${tag}]`\n  },\n  __getNextAttributes: function (tag, frameAttributes) {\n    const defaults = this.o.playerDefaults[tag]\n    const nextAttributes = {}\n\n    if (frameAttributes.poster)\n      nextAttributes.poster = frameAttributes.poster\n\n    Object.keys(defaults).forEach(name => {\n      if (frameAttributes[name] != defaults[name])\n        nextAttributes[name] = frameAttributes[name]\n    })\n\n    this.allowedTypes.forEach(ext => {\n      if (frameAttributes[ext])\n        nextAttributes[ext] = frameAttributes[ext]\n    })\n\n    return nextAttributes\n  },\n  remove: function () {\n    this.render({})\n  }\n})\n\n/* auto-bind context to custom helper methods */\nObject.keys(acf.fields.audioVideo).forEach(prop => {\n  if (/^__/.test(prop))\n    acf.fields.audioVideo[prop] = acf.fields.audioVideo[prop].bind(acf.fields.audioVideo)\n})\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/src/field/index.js\n **/","const $ = jQuery\n\nexport default class SelectFrame {\n  constructor(settings) {\n    let postId = acf.get('post_id')\n    \n    if (!$.isNumeric(postId))\n      postId = 0\n\n    this.settings = {\n      mode: 'select',   // 'select', 'edit'\n      title: '',        // 'Upload Image'\n      button: '',       // 'Select Image'\n      type: '',         // 'image', ''\n      field: '',        // 'field_123'\n      mime_types: '',   // 'pdf, etc'\n      library: 'all',   // 'all', 'uploadedTo'\n      multiple: false,  // false, true, 'add'\n      attachment: 0,    // the attachment to edit\n      post_id: postId,  // the post being edited\n      select: function () {},\n      ...settings\n    }\n    \n    if (this.settings.id)\n      this.settings.attachment = this.settings.id\n    \n    this.createFrame()\n    \n    acf.media.frames.push(this.frame)\n\n    return this\n  }\n  createFrame = () => {\n    const attributes = acf.media._get_media_frame_settings({\n      title: this.settings.title,\n      multiple: this.settings.multiple,\n      library: {},\n      states: [],\n    }, this.settings)\n\n    if (this.settings.hasOwnProperty('mime_types'))\n      attributes.library.type = this._getLibraryTypes()\n\n    const Query = wp.media.query(attributes.library)\n    \n    if (acf.isset(Query, 'mirroring', 'args'))\n      Query.mirroring.args._acfuploader = this.settings.field\n    \n    attributes.states = [\n      new wp.media.controller.Library({\n        library: Query,\n        multiple: attributes.multiple,\n        title: attributes.title,\n        priority: 20,\n        filterable: 'all',\n        editable: true,\n        allowLocalEdits: true\n      })\n    ]\n    \n    if (acf.isset(wp, 'media', 'controller', 'EditImage'))\n      attributes.states.push(new wp.media.controller.EditImage())\n    \n    this.frame = wp.media(attributes)\n    this.frame.uploader.options.uploader.params.allowed_extensions = this.settings.mime_types\n    this.frame.acf = this.settings\n    this.addEvents()\n    this.frame = acf.media._add_media_frame_events(this.frame, this.settings)\n  }\n  addEvents = () => {\n    this.frame.on('content:activate:browse', () => {\n      const toolbar = this.frame.content.get().toolbar\n      const filters = toolbar.get('filters')\n      \n      filters.filters.all.text = acf._e('audioVideo', 'all')\n\n      delete filters.filters.uploaded\n      delete filters.filters.audio\n      delete filters.filters.video\n      delete filters.filters.image\n      \n      $.each(filters.filters, (k, filter) => {\n        if (filter.props.type === null)\n          filter.props.type = this.settings.type\n      })\n    })\n  }\n  open = () => {\n    setTimeout(() =>\n      this.frame.open()\n    )\n\n    return this\n  }\n  _getLibraryTypes = () => {\n    const allowedTypes = this.settings.mime_types.split(',').map(t => t.trim())\n    const generalType = this.settings.type instanceof String\n      ? this.settings.type\n      : 'video'\n\n    const libraryTypes = allowedTypes.map(ext =>\n      acf.fields.audioVideo.__getMime(generalType, ext)\n    )\n\n    /* allow both audio/ogg and video/ogg */\n    if (this.settings.type instanceof Array && allowedTypes.indexOf('ogg') > -1)\n      libraryTypes.push('audio/ogg')\n\n    return libraryTypes\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/src/field/SelectFrame.js\n **/"],"sourceRoot":""}