{"version":3,"sources":["webpack:///webpack/bootstrap 642b1852adc9464f6128","webpack:///./scripts/src/field/index.js","webpack:///./scripts/src/field/SelectFrame.js"],"names":["$","jQuery","acf","fields","audioVideo","field","extend","type","$el","actions","events","focus","$field","find","$inputContainer","$playerContainer","o","get_data","allowedTypes","allowed_types","split","map","t","trim","selectFrameType","general_type","initialize","__getTag","attributes","console","log","this","__guessTag","i","length","audio_types","indexOf","render","tag","nextAttributes","prevAttributes","repeaterKey","rowId","sources","__getSources","empty","removeClass","$mediaElement","addClass","html","__getPlayerMarkup","MediaElementPlayer","Object","keys","forEach","__insertHiddenInput","name","__triggerChange","reduce","ext","concat","__getMime","src","atts","__getTagAtts","height","defaults","playerDefaults","hasOwnProperty","attName","value","data","key","attr","appendTo","_","isEqual","children","trigger","add","$repeater","get_closest_field","multiple","exists","selectFrame","title","_e","mode","library","mime_types","select","attachment","idx","$row","closest","nextAll","each","el","get_field","repeater","doFocus","url","toLowerCase","pop","image","test","poster","args","set","open","edit","__getAttributesFromInputs","shortcode","__getShortcode","editFrame","wp","media","on","__getNextAttributes","detach","toArray","getAttribute","replace","frameAttributes","remove","prop","bind","SelectFrame","settings","createFrame","_get_media_frame_settings","states","Query","query","isset","mirroring","_acfuploader","controller","Library","priority","filterable","editable","allowLocalEdits","push","EditImage","frame","uploader","options","params","allowed_extensions","addEvents","_add_media_frame_events","toolbar","content","get","filters","all","text","uploaded","audio","video","k","filter","props","setTimeout","postId","isNumeric","button","post_id","id","frames"],"mappings":"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","file":"acf-audio-video-field.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 642b1852adc9464f6128\n **/","import SelectFrame from './SelectFrame'\n\nconst $ = jQuery\n\nacf.fields.audioVideo = acf.field.extend({\n  type: 'audioVideo',\n  $el: null,\n  actions: {\n    'ready': 'initialize',\n    'append': 'initialize'\n  },\n  events: {\n    'click a[data-name=\"add\"]': 'add',\n    'click a[data-name=\"edit\"]': 'edit',\n    'click a[data-name=\"remove\"]': 'remove'\n  },\n  focus: function () {\n    this.$el = this.$field.find('.acf-audio-video-uploader')\n    this.$inputContainer = this.$el.find('.acf-hidden')\n    this.$playerContainer = this.$el.find('.player-container')\n    this.o = acf.get_data(this.$el)\n    this.allowedTypes = this.o.allowed_types.split(',').map(t => t.trim())\n    this.selectFrameType = !this.o.general_type || this.o.general_type == 'both'\n      ? ['audio', 'video']\n      : this.o.general_type\n  },\n  initialize: function () {\n    /* noop */\n  },\n  __getTag: function (attributes) {\n    if (typeof attributes === 'undefined')\n      console.log({ this })\n\n    return this.o.general_type && this.o.general_type !== 'both'\n      ? this.o.general_type\n      : this.__guessTag(attributes)\n  },\n  __guessTag: function (attributes) {\n    for (let i = 0; i < this.allowedTypes.length; i++)\n      if (attributes[this.allowedTypes[i]]) {\n        return this.o.audio_types.indexOf(this.allowedTypes[i]) > -1\n          ? 'audio'\n          : 'video'\n      }\n\n    return 'video'\n  },\n  render: function ({ tag, nextAttributes, prevAttributes, repeaterKey, rowId }) {\n    const sources = tag\n      ? this.__getSources(tag, nextAttributes)\n      : []\n    \n    this.$playerContainer.empty().removeClass('audio video')\n    this.$inputContainer.empty()\n\n    if (sources.length) {\n      const $mediaElement = this.$playerContainer\n        .addClass(tag)\n        .html(this.__getPlayerMarkup(tag, nextAttributes, sources))\n        .find(tag)\n\n      new MediaElementPlayer($mediaElement)\n      \n      Object.keys(nextAttributes).forEach(name =>\n        this.__insertHiddenInput(name, nextAttributes[name], repeaterKey, rowId)\n      )\n      this.$el.addClass('has-value')\n    } else {\n      this.__insertHiddenInput()\n      this.$el.removeClass('has-value')\n    }\n\n    this.__triggerChange(prevAttributes, nextAttributes);\n  },\n  __getSources: function (tag, attributes) {\n    return this.allowedTypes.reduce(\n      (sources, ext) =>\n        attributes[ext]\n          ? sources.concat({\n              type: this.__getMime(tag, ext),\n              src: attributes[ext]\n            })\n          : sources,\n      []\n    )\n  },\n  __getMime: function (tag, ext) {\n    switch(ext) {\n      case 'mp3':\n        return 'audio/mpeg'\n      case 'wav':\n        return 'audio/wav'\n      case 'mp4':\n      case 'm4v':\n        return 'video/mp4'\n      case 'webm':\n        return 'video/webm'\n      case 'ogv':\n        return 'video/ogg'\n      case 'ogg':\n        return `${tag}/ogg`\n      case 'flv':\n        return 'video/flv'\n      default:\n        return `${tag}/${ext}`\n    }\n  },\n  __getPlayerMarkup: function (tag, attributes, sources) {\n    const atts = this.__getTagAtts(tag, attributes)\n    const height = tag == 'video'\n      ? 'height=\"360\"'\n      : ''\n\n    return `<div class=\"wp-${tag}\">\n      <!--[if lt IE 9]><script>document.createElement('${tag}');</script><![endif]-->\n      <${tag} class=\"wp-${tag}-shortcode\" width=\"640\" ${height} ${atts} controls>\n        ${sources.map(({ type, src }) =>\n          `<source type=\"${type}\" src=\"${src}?_=1\"/>`\n        )}\n      </${tag}>\n    </div>`\n  },\n  __getTagAtts: function (tag, attributes) {\n    const defaults = this.o.playerDefaults[tag]\n\n    return Object\n      .keys(defaults).concat('poster')\n      .reduce(\n        (atts, name) =>\n          attributes.hasOwnProperty(name)\n            ? `${atts} ${name}=\"${attributes[name]}\"`\n            : atts,\n        ''\n      )\n  },\n  __insertHiddenInput: function (attName, value, repeaterKey, rowId) {\n    const { key } = this.$field.data()\n    const name = !attName\n      ? `acf[${key}]`\n      : repeaterKey && rowId\n        ? `acf[${repeaterKey}][${rowId}][${key}][${attName}]`\n        : `acf[${key}][${attName}]`\n\n    $('<input type=\"hidden\">')\n      .attr({ name, value })\n      .appendTo(this.$inputContainer)\n  },\n  __triggerChange: function (prevAttributes, nextAttributes) {\n    /* register unsaved changes */\n    if (!prevAttributes || !_.isEqual(prevAttributes, nextAttributes))\n      this.$inputContainer.children(':first').trigger('change')\n  },\n  add: function () {\n    let $field = this.$field\n    const $repeater = acf.get_closest_field($field, 'repeater')\n    const multiple = $repeater.exists()\n    this.selectFrame = new SelectFrame({\n      title: acf._e('audioVideo', 'select'),\n      mode: 'select',\n      type: this.selectFrameType,\n      field: $field.data('key'),\n      multiple,\n      library: this.o.library,\n      mime_types: this.o.allowed_types,\n      select: (attachment, idx) => {\n        /* Populate subsequent fields of this kind\n         * if this field is in a repeater field and\n         * user has selected multiple files.\n         */\n        let $row = multiple && $field.closest('.acf-row')\n        \n        if (idx > 0) {\n          const key = $field.data('key')\n          \n          $field = false\n\n          // find next field\n          $row.nextAll('.acf-row:visible').each((idx, el) => {\n            $field = acf.get_field(key, $(el))\n            \n            if (!$field)\n              return\n            \n            // bail early if next file uploader has value\n            if ($field.find('.acf-file-uploader.has-value').exists()) {\n              $field = false\n              return\n            } \n              \n            // end loop if $next is found\n            return false\n          })\n          \n          // add extra row if next is not found\n          if (!$field) {\n            $row = acf.fields.repeater.doFocus($repeater).add()\n            \n            // bail early if no $row (maximum rows hit)\n            if (!$row)\n              return false\n            \n            // get next $field\n            $field = acf.get_field(key, $row)\n          }\n        }\n\n        const ext = attachment.attributes.url.toLowerCase().split('.').pop()\n        const nextAttributes = { [ext]: attachment.attributes.url }\n        const tag = this.__getTag(nextAttributes)\n      \n        if (\n          attachment.attributes.image &&\n          attachment.attributes.image.src &&\n          !/wp-includes\\/images\\/media\\/(audio|video).png$/.test(attachment.attributes.image.src)\n        )\n          nextAttributes.poster = attachment.attributes.image.src\n\n        const args = { tag, nextAttributes }\n\n        if (multiple) {\n          args.repeaterKey = $repeater.data('key')\n          args.rowId = $row.data('id')\n        }\n\n        this.set('$field', $field).render(args)\n      }\n    }).open()\n  },\n  edit: function () {\n    const prevAttributes = this.__getAttributesFromInputs()\n    const tag = this.__getTag(prevAttributes)\n    const shortcode = this.__getShortcode(tag, prevAttributes)\n\n    if (shortcode) {\n      const editFrame = wp.media[tag].edit(shortcode).open()\n\n      editFrame.on('close', () => {\n        const nextAttributes = this.__getNextAttributes(tag, editFrame.media.attributes)\n        const $repeater = acf.get_closest_field(this.$field, 'repeater')\n        const args = { tag, nextAttributes, prevAttributes }\n\n        if ($repeater.exists()) {\n          args.repeaterKey = $repeater.data('key')\n          args.rowId = this.$field.closest('.acf-row').data('id')\n        }\n        \n        this.render(args)\n        editFrame.detach()\n      })\n    }\n  },\n  __getAttributesFromInputs: function () {\n    return this.$inputContainer\n      .children()\n      .toArray()\n      .reduce((attributes, el) => {\n        const name = el.getAttribute('name').replace(/.*\\[(.*)\\]$/, '$1')\n        const value = el.getAttribute('value')\n\n        return {\n          ...attributes,\n          [name]: value\n        }\n      }, {})\n  },\n  __getShortcode: function (tag, attributes) {\n    const atts = Object\n      .keys(attributes)\n      .reduce(\n        (atts, name) =>\n          `${atts} ${name}=\"${attributes[name]}\"`,\n        ''\n      )\n      \n    return atts && `[${tag} ${atts}][/${tag}]`\n  },\n  __getNextAttributes: function (tag, frameAttributes) {\n    const defaults = this.o.playerDefaults[tag]\n    const nextAttributes = {}\n\n    if (frameAttributes.poster)\n      nextAttributes.poster = frameAttributes.poster\n\n    Object.keys(defaults).forEach(name => {\n      if (frameAttributes[name] != defaults[name])\n        nextAttributes[name] = frameAttributes[name]\n    })\n\n    this.allowedTypes.forEach(ext => {\n      if (frameAttributes[ext])\n        nextAttributes[ext] = frameAttributes[ext]\n    })\n\n    return nextAttributes\n  },\n  remove: function () {\n    this.render({})\n  }\n})\n\n/* auto-bind context to custom helper methods */\nObject.keys(acf.fields.audioVideo).forEach(prop => {\n  if (/^__/.test(prop))\n    acf.fields.audioVideo[prop] = acf.fields.audioVideo[prop].bind(acf.fields.audioVideo)\n})\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/src/field/index.js\n **/","export default class SelectFrame {\n  constructor(settings) {\n    let postId = acf.get('post_id')\n    \n    if (!$.isNumeric(postId))\n      postId = 0\n\n    this.settings = {\n      mode: 'select',   // 'select', 'edit'\n      title: '',        // 'Upload Image'\n      button: '',       // 'Select Image'\n      type: '',         // 'image', ''\n      field: '',        // 'field_123'\n      mime_types: '',   // 'pdf, etc'\n      library: 'all',   // 'all', 'uploadedTo'\n      multiple: false,  // false, true, 'add'\n      attachment: 0,    // the attachment to edit\n      post_id: postId,  // the post being edited\n      select: function () {},\n      ...settings\n    }\n    \n    if (this.settings.id)\n      this.settings.attachment = this.settings.id\n    \n    this.createFrame()\n    \n    acf.media.frames.push(this.frame)\n\n    return this\n  }\n  createFrame = () => {\n    const attributes = acf.media._get_media_frame_settings({\n      title: this.settings.title,\n      multiple: this.settings.multiple,\n      library: {},\n      states: [],\n    }, this.settings)      \n    const Query = wp.media.query(attributes.library)\n    \n    if (acf.isset(Query, 'mirroring', 'args'))\n      Query.mirroring.args._acfuploader = this.settings.field\n    \n    attributes.states = [\n      new wp.media.controller.Library({\n        library: Query,\n        multiple: attributes.multiple,\n        title: attributes.title,\n        priority: 20,\n        filterable: 'all',\n        editable: true,\n        allowLocalEdits: true\n      })\n    ]\n    \n    if (acf.isset(wp, 'media', 'controller', 'EditImage'))\n      attributes.states.push(new wp.media.controller.EditImage())\n    \n    this.frame = wp.media(attributes)\n    this.frame.uploader.options.uploader.params.allowed_extensions = this.settings.mime_types\n    this.frame.acf = this.settings\n    this.addEvents()\n    this.frame = acf.media._add_media_frame_events(this.frame, this.settings)\n  }\n  addEvents = () => {\n    this.frame.on('content:activate:browse', () => {\n      const toolbar = this.frame.content.get().toolbar\n      const filters = toolbar.get('filters')\n      \n      filters.filters.all.text = acf._e('audioVideo', 'all')\n\n      delete filters.filters.uploaded\n      delete filters.filters.audio\n      delete filters.filters.video\n      delete filters.filters.image\n      \n      $.each(filters.filters, (k, filter) => {\n        if (filter.props.type === null)\n          filter.props.type = this.settings.type\n      })\n    })\n  }\n  open = () => {\n    setTimeout(() =>\n      this.frame.open()\n    )\n\n    return this\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/src/field/SelectFrame.js\n **/"],"sourceRoot":""}